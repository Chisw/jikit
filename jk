#!/bin/bash

if [ ! $1 ]
then
  echo "JIKIT: Empty command
  cp: [snippet s-name]  copy code snippet
  ls: [dir name]        list filenames to txt
  op: [site s-name]     open a site
  rm: [jk-rm.txt]
  run: [app s-name]      run an app
  start: [proj s-name]     start a project"
  exit
fi

if [ $1 = 'cp' ]
then
  if [ ! $2 ]
  then
    echo "JIKIT: Empty snippet name"
  else
    JIKIT_FOLDER=$(cd "$(dirname "$0")";pwd)
    file="$JIKIT_FOLDER/src/copy/$2"
    if [ -f $file ]
    then
      pbcopy < $file
      echo "JIKIT: Copied successfully ($2)"
    else
      files="$JIKIT_FOLDER/src/copy/*"
      echo "JIKIT: Snippet '$2' is not exist"
      for file in $files
      do
        echo "  $(basename $file)"
      done
    fi
  fi
elif [ $1 = 'op' ]
then
  open https://baidu.com
elif [ $1 = 'ls' ]
then
  stamp=`date +%s`
  targetTxtFile="/Users/$(whoami)/Desktop/jk-ls-$stamp.txt"
  touch $targetTxtFile

  currentFiles="./*"
  settedFiles="$2/*"
  targetFiles=$settedFiles

  if [ ! $2 ]
  then
    targetFiles=$currentFiles
  fi

  for file in $targetFiles
  do
    echo $(basename $file) >> $targetTxtFile
  done
  echo "JIKIT: Listed successfully ($targetTxtFile)"
elif [ $1 = 'rm' ]
then
  list=`cat /users/$(whoami)/Desktop/jk-rm.txt`
  for file in $list
  do
    if [ -f $file ]
    then
      rm $file
      echo "$file removed"
    else
      echo "no such a file $file"
    fi
  done
  exit
else
  echo "JIKIT: Command '$1' is not exist"
fi

